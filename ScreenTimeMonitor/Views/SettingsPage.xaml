<!-- Copyright (c) Microsoft Corporation and Contributors. -->
<!-- Licensed under the MIT License. -->

<Page
    x:Class="ScreenTimeMonitor.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <ScrollViewer>
        <StackPanel Spacing="32" Padding="0,0,0,24">
            
            <!-- Page Header -->
            <TextBlock Text="Settings" Style="{StaticResource PageTitleTextBlockStyle}"/>

            <!-- General Settings -->
            <StackPanel>
                <TextBlock Text="General" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,16"/>
                
                <Border Style="{StaticResource StatCardStyle}">
                    <StackPanel Spacing="16">
                        <ToggleSwitch Header="Start with Windows" 
                                     IsOn="{x:Bind ViewModel.StartWithWindows, Mode=TwoWay}"
                                     OnContent="Enabled" OffContent="Disabled"/>
                        
                        <StackPanel>
                            <TextBlock Text="Theme" FontWeight="SemiBold" Margin="0,0,0,8"/>
                            <ComboBox ItemsSource="{x:Bind ViewModel.AvailableThemes, Mode=OneWay}"
                                     SelectedItem="{x:Bind ViewModel.SelectedTheme, Mode=TwoWay}"
                                     MinWidth="200" HorizontalAlignment="Left"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- Break Reminders -->
            <StackPanel>
                <TextBlock Text="Break Reminders" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,16"/>
                
                <Border Style="{StaticResource StatCardStyle}">
                    <StackPanel Spacing="16">
                        <ToggleSwitch Header="Enable break reminders" 
                                     IsOn="{x:Bind ViewModel.BreakRemindersEnabled, Mode=TwoWay}"
                                     OnContent="Enabled" OffContent="Disabled"/>
                        
                        <StackPanel IsEnabled="{x:Bind ViewModel.BreakRemindersEnabled, Mode=OneWay}">
                            <TextBlock Text="Reminder interval (minutes)" FontWeight="SemiBold" Margin="0,0,0,8"/>
                            <NumberBox Value="{x:Bind ViewModel.BreakReminderIntervalMinutes, Mode=TwoWay}"
                                      Minimum="15" Maximum="480" 
                                      SmallChange="15" LargeChange="60"
                                      MinWidth="200" HorizontalAlignment="Left"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- Data Management -->
            <StackPanel>
                <TextBlock Text="Data Management" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,16"/>
                
                <Border Style="{StaticResource StatCardStyle}">
                    <StackPanel Spacing="16">
                        <StackPanel>
                            <TextBlock Text="Data retention (days)" FontWeight="SemiBold" Margin="0,0,0,8"/>
                            <NumberBox Value="{x:Bind ViewModel.DataRetentionDays, Mode=TwoWay}"
                                      Minimum="7" Maximum="365" 
                                      SmallChange="1" LargeChange="30"
                                      MinWidth="200" HorizontalAlignment="Left"/>
                            <TextBlock Text="Data older than this will be automatically deleted"
                                      FontSize="12" Opacity="0.7" Margin="0,4,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- Application Categories -->
            <StackPanel>
                <TextBlock Text="Application Categories" FontSize="20" FontWeight="SemiBold" Margin="0,0,0,16"/>
                
                <Border Style="{StaticResource StatCardStyle}">
                    <StackPanel Spacing="16">
                        <TextBlock Text="Available categories for organizing applications:"
                                  Margin="0,0,0,8"/>
                        
                        <ItemsControl ItemsSource="{x:Bind ViewModel.AvailableCategories, Mode=OneWay}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="{ThemeResource AccentAAFillColorSecondaryBrush}"
                                           CornerRadius="12" Padding="12,6" Margin="0,0,8,0">
                                        <TextBlock Text="{Binding}" FontSize="12"/>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        
                        <TextBlock Text="Applications are automatically categorized, but you can manually adjust them in the future."
                                  FontSize="12" Opacity="0.7"/>
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- Action Buttons -->
            <StackPanel Orientation="Horizontal" Spacing="16">
                <Button Content="Save Settings" 
                       Command="{x:Bind ViewModel.SaveSettingsCommand}"
                       Style="{StaticResource AccentButtonStyle}"/>
                
                <Button Content="Reset to Defaults" 
                       Command="{x:Bind ViewModel.ResetSettingsCommand}"/>
            </StackPanel>

        </StackPanel>
    </ScrollViewer>
</Page>
